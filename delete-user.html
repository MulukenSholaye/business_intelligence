<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delete User</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Base styling for the body */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
            padding: 1.5rem;
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center; /* Center content vertically */
            align-items: center; /* Center content horizontally */
            box-sizing: border-box;
        }
        /* Card styling for the confirmation dialog */
        .card {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem; /* Increased padding for a more prominent dialog */
            text-align: center;
            max-width: 500px; /* Limit width for better readability */
            width: 100%;
        }
        /* Styling for the delete confirmation button */
        .btn-delete {
            background-color: #dc2626; /* Red background */
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 0.375rem;
            font-weight: 500;
            transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn-delete:hover {
            background-color: #b91c1c; /* Darker red on hover */
            transform: translateY(-1px);
        }
        .btn-delete:active {
            transform: translateY(0);
        }
        /* Styling for the cancel button */
        .btn-cancel {
            background-color: #6b7280; /* Gray background */
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 0.375rem;
            font-weight: 500;
            transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn-cancel:hover {
            background-color: #4b5563; /* Darker gray on hover */
            transform: translateY(-1px);
        }
        .btn-cancel:active {
            transform: translateY(0);
        }

        /* Responsive adjustments */
        @media (max-width: 640px) {
            .card {
                padding: 1.5rem;
            }
            .btn-group {
                flex-direction: column; /* Stack buttons vertically */
                gap: 0.75rem; /* Space between stacked buttons */
            }
            .btn-delete, .btn-cancel {
                width: 100%; /* Full width buttons */
            }
        }
    </style>
</head>
<body>
    <!-- Main heading for the page -->
    <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center md:text-4xl">Delete User</h1>

    <!-- Card containing the delete confirmation -->
    <div class="card">
        <p class="text-lg text-gray-700 mb-6 md:text-xl">
            Are you sure you want to delete the user "<span id="usernameToDelete" class="font-semibold text-red-600"></span>" (ID: <span id="userIdToDelete" class="font-semibold text-red-600"></span>)?
            <br>This action cannot be undone.
        </p>
        <!-- Button group for confirming or canceling deletion -->
        <div class="flex justify-center space-x-4 btn-group">
            <button class="btn-delete" onclick="handleDeleteUser()">
                <i class="fas fa-trash-alt mr-2"></i> Confirm Delete
            </button>
            <button class="btn-cancel" onclick="navigateBack()">
                <i class="fas fa-times-circle mr-2"></i> Cancel
            </button>
        </div>
    </div>

    <script>
        // Function to get query parameters from the URL
        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Populate user details based on URL parameter (simulated data)
        document.addEventListener('DOMContentLoaded', () => {
            const userId = getQueryParam('id');
            let username = 'Unknown User'; // Default value

            // In a real application, you'd fetch user data based on userId here
            if (userId === 'ETU001') {
                username = 'Abebe_Kebede';
            } else if (userId === 'ETU002') {
                username = 'Tigist_Lemma';
            } else if (userId === 'ETU003') {
                username = 'Samuel_Fikru';
            } else if (userId === 'ETU004') {
                username = 'Aster_Mamo';
            }
            // Add more conditions for other user IDs as needed for demo

            document.getElementById('userIdToDelete').textContent = userId || 'N/A';
            document.getElementById('usernameToDelete').textContent = username;
        });

        /**
         * Handles the user deletion process.
         * In a real application, this would send a delete request to a backend.
         */
        function handleDeleteUser() {
            const userId = document.getElementById('userIdToDelete').textContent;
            const username = document.getElementById('usernameToDelete').textContent;

            // Simulate deletion
            console.log(`Deleting user: ${username} (ID: ${userId})`);
            showMessageBox(`User '${username}' (ID: ${userId}) deleted successfully!`, 'success');

            // Navigate back to the user list after a short delay
            setTimeout(() => {
                navigateBack();
            }, 1500);
        }

        /**
         * Navigates back to the main user management page.
         */
        function navigateBack() {
            if (window.parent && window.parent.document && window.parent.document.getElementById('contentFrame')) {
                window.parent.document.getElementById('contentFrame').src = 'user-management.html';
            } else {
                console.warn("Could not find parent contentFrame. Navigating directly.");
                window.location.href = 'user-management.html';
            }
        }

        /**
         * Displays a custom message box instead of alert().
         * @param {string} message The message to display.
         * @param {string} type 'success' or 'error' for styling.
         */
        function showMessageBox(message, type) {
            let messageBox = document.getElementById('messageBox');
            if (!messageBox) {
                messageBox = document.createElement('div');
                messageBox.id = 'messageBox';
                messageBox.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    padding: 15px 25px;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    z-index: 1000;
                    font-weight: 600;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    opacity: 0;
                    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
                `;
                document.body.appendChild(messageBox);
            }

            messageBox.innerHTML = '';
            const icon = document.createElement('i');
            const text = document.createElement('span');
            text.textContent = message;

            if (type === 'success') {
                messageBox.style.backgroundColor = '#e0e7ff'; /* Light blue for success */
                messageBox.style.color = '#2563eb'; /* Darker blue text */
                icon.className = 'fas fa-check-circle';
            } else if (type === 'error') {
                messageBox.style.backgroundColor = '#fee2e2';
                messageBox.style.color = '#991b1b';
                icon.className = 'fas fa-times-circle';
            }

            messageBox.appendChild(icon);
            messageBox.appendChild(text);

            messageBox.style.opacity = '1';
            messageBox.style.transform = 'translateX(-50%) translateY(0)';

            setTimeout(() => {
                messageBox.style.opacity = '0';
                messageBox.style.transform = 'translateX(-50%) translateY(-20px)';
            }, 3000);
        }
    </script>
</body>
</html>
